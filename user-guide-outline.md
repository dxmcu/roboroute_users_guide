# 大纲

## 一、简介

### 1.1 RoboRoute 简介

RoboRoute 是上海仙知机器人科技有限公司（Seer Robotics，以下简称 仙知）开发的多机器人调度系统。
	
仙知整合 RoboRoute 系统、Roboshop Pro 软件，以及 SRC2000 系列控制器，可针对多种类、多数量移动机器人复杂操作与协同配合的场景，提供快速、专业的整厂解决方案，以此提升工厂的整体作业效率。

![pic-1.1](D:\Workspace\git_project\roboroute_users_guide\pic-1.1.jpg)

### 1.2 RoboRoute 主要功能

RoboRoute 系统的核心功能如下：

- **机器人调度**

  - 任务分配

    将业务订单分配给最合适的机器人执行。

  - 路线规划

    为执行业务的机器人规划合理的移动路线。

  - 交通管制

    预防机器人之间发生碰撞。

    解决机器人在运行中的路线冲突。

- **场景编辑**

  配合 Roboshop Pro 软件，编辑机器人的移动路线及节点。

  配置工作站、充电桩信息。

  配置机器人可操作的业务类型、动作类型等。

- **状态监控**

  在系统运行期间，实时监控整场机器人的在线状态、所处位置、行进路线、业务进度等。

  也可聚焦具体的机器人，对其进行持续跟踪。

- **机器人管理**

  管理机器人列表，控制机器人在 RoboRoute 系统中上下线。

  手动指定机器人前往节点或工作站。

  撤销机器人正在执行的业务。

  在不影响生产运输前提下，自动引导低电量机器人回坞充电。

- **业务管理**

  支持可视化地创建业务订单。

  通过执行状态，筛选业务订单列表，并获取订单的详细信息。

  批量撤销业务订单。

- **业务统计**

  统计机器人的累计运行时间、停靠和充电时间，以及整体利用率。

  统计工作站的累计访问时间。

  统计业务订单的分配和执行时间，以及完成情况。

- **交互协议**

  提供简洁的 HTTP 访问协议。通过协议可以：

  创建、查询及撤销业务订单。

  查询机器人的状态，或指定机器人在 RoboRoute 系统中上下线。

## 二、部署环境

### 2.1 RoboRoute 服务器

RoboRoute 的硬件载体选用 联想 ThinkStation P318 工作站，其主要优点有：

- 配置优越，性能强劲，性价比高。
- 工作站级主机，满足工厂 7 × 24 小时的不间断生产需求。
- 品牌型号入选节能环保清单，即《[环境标志产品政府采购清单](http://www.ccgp.gov.cn/search/hbqdchaxun.htm)》和《[节能产品政府采购清单](http://www.ccgp.gov.cn/search/jnqdchaxun.htm)》。

RoboRoute 服务器的主要配置：

- CPU：英特尔酷睿Core i7-7700
- RAM：16G DDR4 2133 NECC
- 硬盘：1TB
- 操作系统：Ubuntu 16.04

**请注意：**

```
**为保证用户权益及系统稳定性，RoboRoute 软件仅在仙知指定的 RoboRoute 服务器上运行。**

**请勿拆下 RoboRoute 服务器上的授权锁。**
```

### 2.2 机器人及 RoboShop Pro 软件

加入 RoboRoute 调度序列的机器人，必须满足以下条件：

- 使用仙知 SRC1100 或者 SRC2000 系列机器人主控器。
- 使用含通信功能的电池，能够向 RoboRoute 反馈电量信息。
- 机器人具备自主充电能力。

### 2.3 WIFI 环境

TODO

### 2.4 场景限制

TODO

## 三、系统安装

### 3.1 硬件安装

### 3.2 密码和账户

### 3.3网络配置

### 3.4 更新

## 四、场景元素介绍

### 4.1 节点

节点是离散的用于逻辑映射场景路线中机器人位置的元素。在操作模式下,机器人从场景中的一个点到另一点运行。节点分为:地标点和停靠点。

#### 4.1.1 地标点

地标点指机器人在处理业务订单时可能短暂停止的位置,例如执行工作站的操作,机器人在到达该位置时,会进行一系列的动作；或者机器人在场景中经过的一系列点位。

#### 4.1.2 停靠点

机器人的电量等级：

低电量报警阈值：该阈值线表示当机器人低于该线时会自动去充电，此时不会再接受新的业务订单，如果无空闲充电点位，机器人会寻找停靠点进行自动泊车；

电量充足阈值：该阈值线表示当机器人高于该线时会告知调度系统允许派发新的业务订单；

电量不充足：当机器人的电量处于报警阈值与充足阈值之间时，成为电量不充足，此时机器人依然能够正常接受业务订单的派遣；

停靠点指机器人可在此较长时间停靠占用的位置，在没有未执行的业务订单时，机器人会自动寻找停靠点进行自动泊车，等待分配新的业务订单；如果机器人的电量处于低电量报警阈值之下，并且不存在空闲的充电点位，机器人也会回到停靠点。

### 4.2 工作站

工作站是机器人需要执行业务操作的站点，是不可实际到达的点位，且工作站不可以单独存在，必须使用工作站连接将工作站和与之对应的地标点连接起来，根据工作站所属的类型不同，执行不同的操作；例如在工厂场景中需要进行物料流转、机器人工作交接配合等动作时，需要将该点设置为工作站。

### 4.3 工作站连接

工作站连接是用于将工作站和与之对应的地标点进行绑定的工具。

### 4.4 工作站类型

工作站类型用于区分不同的工作站所要执行的动作，根据工厂场景中需要完成的动作类型进行分类，将类型相同的动作存入同一个工作站类型中。

### 4.5 路径

#### 4.5.1 直线

#### 4.5.2 2-Bezier

#### 4.5.3 3-Bezier

### 4.6 机器人

### 4.7 互斥区

### 4.8 元素组

### 4.9 元属性

## 五、入门

### 5.1 启动 RoboRoute

// TODO

### 5.2关闭 RoboRoute

// TODO

### 5.3 Kernel 功能及布局

#### 5.3.1 Kernel 模式

Kernel 是进行机器人管理以及核心功能实现的运算软件，分为编辑模式和操作模式。编辑模式可以新建一个空白场景，该场景中不存在任何元素，可以在Viewer中使用导入 Kernel 当前场景来编辑该空白场景；操作模式是 Kernel 工作时的运行模式。Kernel 的模式会根据 Viewer 的模式自动切换，不需要手动设置。

#### 5.3.2 菜单栏

Kernel 菜单栏包含两个主要功能：Kernel 和帮助；Kernel 中包含模式切换操作、新建场景操作以及退出关闭操作；帮助中是关于软件的版权信息。

![kernel菜单栏](F:\openTCS_4.10\work\使用手册\RoboRoute\RoboRoute截图照片\kernel菜单栏.png)

#### 5.3.3 关键日志页面

Kernel 关键日志负责记录 Kernel 模式切换或者地图同步的状态信息，从中可以获取当前 Kernel 处在哪一种模式以及使用的场景。

![1535525298133](C:\Users\dell\AppData\Local\Temp\1535525298133.png)

#### 5.3.4 机器人管理页面

机器人管理页面中包含 Kernel 当前场景中所有的机器人信息，机器人栏表示场景中全部的机器人，可以在是否可用栏选择是否启用该机器人，状态栏实时显示机器人的状态，可以在 State 栏中设置；适配器栏包含当前 Kernel 中可用的适配器，位置栏显示机器人当前所在场景中的位置，可以在机器人信息配置项中的 Pos 中设置；Energy 栏用于设置机器人当前的电量。

机器人状态：

UNAVAILABLE：机器人未连接到调度服务器，处于掉线状态；

IDLE：机器人连接到调度服务器，处于在线空闲状态；

ERROR：机器人故障或执行任务失败出现异常，处于不可用状态；

EXECUTING：机器人在线，并正在执行业务订单，处于执行状态；

CHARGING：机器人在线，并正在执行充电操作，处于执行状态；

UNKNOWN：机器人不属于场景之中，处于不可用状态；

![1535526547167](C:\Users\dell\AppData\Local\Temp\1535526547167.png)

### 5.4 Viewer 功能及布局

![1535534292974](C:\Users\dell\AppData\Local\Temp\1535534292974.png)

[^Viewer]: 菜单栏



#### 5.4.1 Viewer 模式

Viewer 是用于可视化操作的软件，分为编辑模式和操作模式：

编辑模式：允许在场景视图窗口中进行场景的编辑操作，例如机器人的添加、工作站类型的编辑、路径的微调等一系列可视化操作；

操作模式：在编辑模式将场景保存后，选择将场景同步到 Kernel ，然后选择菜单栏—>文件—>模式功能将模式切换到操作模式，此时界面中会增加显示机器人的信息，以及允许的对机器人的一系列操作；

#### 5.4.2 菜单栏

Viewer 菜单栏包括文件、编辑、动作、视图、帮助等功能：

文件操作：

![1535536392094](C:\Users\dell\AppData\Local\Temp\1535536392094.png)

|        功能         |                  描述                  |
| :-----------------: | :------------------------------------: |
|      新建场景       | 新建一个空白场景，可以任意添加场景元素 |
|      导入场景       |       从文件夹中导入XML格式场景        |
|      保存场景       |       将编辑好的场景保存至文件夹       |
|     场景另存为      |    将编辑好的场景重命名保存至文件夹    |
|  导入 Kernel 场景   |        导入当前 Kernel 中的场景        |
| 将场景同步至 Kernel |   将当前视图中的场景同步到 Kernel 中   |
|   派遣所有机器人    |       一键派遣场景中所有的机器人       |
|        模式         |        选择编辑模式或者操作模式        |
|    显示场景信息     |      显示场景中各个场景元素的数量      |

编辑操作：

![1535594354640](C:\Users\dell\AppData\Local\Temp\1535594354640.png)

|   功能   |          描述          |
| :------: | :--------------------: |
|   撤销   |     撤销上一步操作     |
|   重做   |     重复上一步操作     |
|   删除   |      删除选中元素      |
|   复制   |      复制选中元素      |
|   粘贴   | 将复制的元素粘贴至此处 |
|   克隆   |  将选中的元素进行克隆  |
|   剪切   |   剪切选中元素到某处   |
|   全选   |      选中所有元素      |
| 取消全选 | 取消所有元素的选中状态 |

动作操作：

![1535537820195](C:\Users\dell\AppData\Local\Temp\1535537820195.png)

|            功能            |                   描述                   |
| :------------------------: | :--------------------------------------: |
|        新建业务订单        |         根据需求手动书写业务订单         |
|         查找机器人         |       定位想要查找的场景中的机器人       |
| 视图坐标替换为当前场景坐标 |   将视图窗口中的坐标替换为场景中的坐标   |
| 场景坐标替换为当前视图坐标 | 将场景中的坐标替换为当前视图窗口中的坐标 |

视图操作：

![1535601187126](C:\Users\dell\AppData\Local\Temp\1535601187126.png)

|       功能       |                      描述                      |
| :--------------: | :--------------------------------------------: |
|   添加背景图片   |        为当前编辑的场景添加一张背景图片        |
|   添加场景视图   |              增加一个场景视图窗口              |
| 添加业务订单视图 |            增加一个业务订单视图窗口            |
| 添加订单序列视图 |            增加一个订单序列视图窗口            |
|       插件       | 集成如下的统计、资源分配、自动生成业务订单功能 |
|       统计       | 用于统计机器人运行的信息以及订单执行情况的信息 |
|    资源分配图    | 用于查看所有机器人运行时在场景中占用资源的信息 |
| 自动生成业务订单 |        用于生成随机业务订单（测试推荐）        |
|   重置窗口布局   |    在窗口布局发生变化时使用可以恢复初始布局    |



#### 5.4.3 工具栏

工具栏主要进行场景的编辑操作，进行场景元素的增删改查。

![1535608787316](C:\Users\dell\AppData\Local\Temp\1535608787316.png)

|    工具    |                功能                |    工具    |             功能             |
| :--------: | :--------------------------------: | :--------: | :--------------------------: |
|    选择    |          选择场景中的元素          |    拖拽    | 拖拽场景位于视图窗口中的位置 |
|    节点    |         添加不同类型的节点         |   工作站   |          添加工作站          |
|    路径    |         添加不同类型的路径         | 工作站连接 |      连接工作站与地标点      |
| 工作站类型 | 添加不同类型的工作站以及允许的动作 |   机器人   |          添加机器人          |
|   互斥区   |             添加互斥区             |   元素组   |                              |
|  订单书写  |          手动书写业务订单          | 查找机器人 | 快速定位场景中的某一台机器人 |
|  布局排版  |     将选中元素置于场景中的位置     |    移动    |    将选中元素上下左右移动    |
|  置于顶层  |     将选中元素置于场景的最上层     |  置于底层  |  将选中元素置于场景的最底层  |

#### 5.4.4 场景元素栏

![1535611475030](C:\Users\dell\AppData\Local\Temp\1535611475030.png)

场景元素栏显示场景中的元素概括，机器人表示在该场景中包含的机器人数量以及名称，可以在此进行机器人的名称编辑；节点表示场景中所有的地标点和停靠点；路径表示场景中地标点之间或者与停靠点之间的路线连接；工作站表示场景中包含的所有的工作站；工作站类型中可以定义不同的工作站，并对在该工作站允许的操作进行定义；工作站连接表示场景中所有工作站与其地标点之间的连接线；以上均支持增删查功能。

#### 5.4.5 互斥区栏

![1535630003749](C:\Users\dell\AppData\Local\Temp\1535630003749.png)

互斥区（Block）是只允许一台机器人在该设定区域内进行操作的场景元素集合，当一台机器人进入该互斥区时，如果其他机器人前进路线包含该区域中的元素，那么这些机器人会在互斥区之外最近的地标点进行等候，直到互斥区中的机器人执行完操作并驶离该互斥区。

#### 5.4.6 元素组栏

#### 5.4.7 元素信息栏

#### 5.4.8 机器人信息栏

#### 5.4.9 Kernel 关键日志

#### 5.4.10 场景视图

#### 5.4.11 业务订单视图

#### 5.4.12 业务订单序列视图

### 

## 六、编辑场景

### 6.1 使用 Roboshop Pro 软件构建原始场景

### 6.2 切换至编辑模式

### 6.3 载入场景

### 6.4 添加机器人

#### 6.4.1 编辑可执行的业务类型

#### 6.4.2 编辑自主充电类型

### 6.5 添加工作站信息

### 6.6 保存场景

### 6.7 显示场景信息

### 6.8 Viewer 向 Kernel 同步场景

### 6.9 Viewer 导入 Kernel 当前场景

### *6.10 使用 Roboshop Pro 软件更新场景文件

### *6.11 使用 Roboshop Pro 软件融合场景文件

### 6.12 场景编辑规则

#### 6.12.1 单向路线

#### 6.12.2 交叉路线设计

#### 6.12.3 停靠点及工作站设计

#### 6.12.4 双向路线及互斥区

#### 6.12.5有向强连通图

## 七、机器人配置及操作

### 7.1 使用 Roboshop Pro 软件配置机器人名称

### 7.2 使用 Roboshop Pro 软件载入场景对应的 smap

### 7.3 使用 Roboshop Pro 软件重定位机器人

### 7.4 使用 Roboshop Pro 软件释放控制权

### 7.5 使用 Roboshop Pro 软件回收控制权

### 7.6 管理机器人通信适配器

### 7.7 使能机器人通信适配器

### 7.8 确认机器人位置

## 八、操作模式

### 8.1 切换至操作模式

### 8.2 新建业务订单

### 8.3 业务订单视图

#### 8.3.1 筛选业务订单列表

#### 8.3.2 查看业务订单状态

#### 8.3.3 撤销业务订单

### 8.4 业务订单序列视图

#### 8.4.1 查看业务订单序列状态

### 8.5 机器人视图

#### 8.5.1 机器人图标说明

#### 8.5.2 机器人状态

#### 8.5.3 机器人在线状态

#### 8.5.4 机器人电量

#### 8.5.5 聚焦和跟踪机器人

#### 8.5.6 派遣机器人至节点

#### 8.5.7 派遣机器人至工作站

#### 8.5.8 更改机器人在线状态

#### 8.5.9 撤销正在执行的业务订单

### 8.6 典型操作流程

## 九、RoboRoute 配置（公司内部人员，以及集成商使用）

### 9.1 Kernel 关键配置列表

### 9.2 Viewer 关键配置列表

## 十、扩展插件

### 10.1 订单统计

### 10.2 随机订单测试

## 十一、关于

### 11.1 关于软件

### 11.2 关键术语表

|      术语      |    释义    | 详细解释 |
| :------------: | :--------: | :------: |
|     Model      |    场景    |          |
| TransportOrder |  业务订单  |          |
|  DriverOrder   | 订单子任务 |          |
|    Property    |   元属性   |          |
|    Vehicle     |   机器人   |          |
| OrderSequence  |  订单序列  |          |
|     Point      |    节点    |          |
|   Halt Point   |   地标点   |          |
|   Park Point   |   停靠点   |          |

### 11.3 快捷键

|        操作        |       键        |
| :----------------: | :-------------: |
|      新建场景      |    Ctrl + N     |
|      导入场景      |    Ctrl + L     |
|      保存场景      |    Ctrl + S     |
|     场景另存为     | Ctrl + Shift +S |
|   导入Kernel场景   |     Alt + K     |
| 将场景同步到Kernel |     Alt + P     |
|   派遣所有机器人   |     Alt +D      |
|      编辑模式      |     Alt + M     |
|      操作模式      |     Alt + O     |

### 11.4 修订历史

| 文件版本 | 发布时间 | 更新描述 | 软件版本 |
| :------: | :------: | :------: | :------: |
|          |          |          |          |

### 11.5 Web API 链接

### 11.6 FAQ 链接

### 11.7 联系我们

网站: [www.seer-robotics.com](http://www.seer-robotics.com/)

地址: 上海市浦东新区金桥镇金领之都7号楼203室

邮箱: [contact@seer-robotics.com](mailto:contact@seer-robotics.com)

技术支持: [support@seer-robotics.com](mailto:support@seer-robotics.com)

商务合作: [zhangsui@seer-robotics.com](mailto:zhangsui@seer-robotics.com)

技术咨询: [yys@seer-robotics.com](mailto:yys@seer-robotics.com)

电话: 400-061-6660 / 086-021-61112205

### 11.8 版权声明

本手册会定期进行检查和修正，更新后的内容将出现在新版本中。本手册中的内容或信息如有变更，恕不另行通知。

安装、使用产品前请阅读本手册。

请保管好本手册，以便随时阅读与参考。

本手册所记载的内容，不排除有错误或遗漏的可能性，如对本手册中的内容有疑问，请与我司[联系](mailto:support@seer-robotics.com)。



 Seer Robotics 和 仙知 为上海仙知机器人科技有限公司的注册商标。

 

上海仙知机器人科技有限公司对 RoboRoute 软件保留所有权利。

 

上海仙知机器人科技有限公司对本文档内容保留所有权利，请勿重制或分发此文档。

 

Copyright © 2015 – 2018 Seer Robotics Co.,Ltd.